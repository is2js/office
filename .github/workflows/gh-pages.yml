name: Github Pages
on:
  push:
    branches:
      - master  # Set a branch name to trigger deployment
    pull_request:

jobs:
  deploy: # actions > ì¢Œì¸¡ íƒ­ìœ¼ë¡œ ë‚˜ì˜¬ job ì´ë¦„
    runs-on: ubuntu-latest # ì‹œì‘OS
    permissions: # ê¶Œí•œ ì„¤ì •
      contents: write
    concurrency: # ë™ì‹œì„± ì„¤ì •
      group: ${{ github.workflow }}-${{ github.ref }} # ë™ì‹œì„± ê·¸ë£¹ ì„¤ì •
    steps:
      - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "ğŸ‰ The job is now running on a ${{ runner.os }} server hosted by Github!"
      - run: echo "ğŸ” The name  of your branch is  ${{ github.ref }} and your repository is ${{ github.repository }}."

      - name: Checkout Repository # ì²´í¬ì•„ì›ƒ => repositoryì˜ ì½”ë“œë“¤ì„ runnerë¡œ í´ë¡ í›„ checkoutê¹Œì§€
        uses: actions/checkout@v3
      - run: echo "?? The ${{  github.repository }} repository has been cloned out to ${{ github.workspace }} on the runner."

      - name: List files # íŒŒì¼ ëª©ë¡ ì¶œë ¥
        run: |
          ls ${{ github.workspace }}

      - run: echo "ğŸ This job's status is ${{ job.status }}."

      - name: Setup python # íŒŒì´ì¬ ì…‹ì—…
        uses: actions/setup-python@v4
        with:
          python-version: '3.11' # íŒŒì´ì¬ ë²„ì „ ì„¤ì •

      - name: Build site # ë¡œì»¬ í„°ë¯¸ë„ì—ì„œ í•˜ë˜ python íŒ¨í‚¤ì§€ ë¹Œë“œ ì‘ì—…
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          
          pip install -e .
          mdr

#python setup.py install
#mdr
      - name: Deploy Github Pages # gh-pagesì— ë¹Œë“œí•œ ê²ƒê³¼ í•¨ê»˜ ë°°í¬ (ë¹Œë“œí•œ ë‚´ìš©ë¬¼ì„ pull requestë¡œ gh-pages ë¸Œëœì¹˜ì— ë°˜ì˜)
        uses: peaceiris/actions-gh-pages@v4
        if: ${{ github.ref == 'refs/heads/master' }}
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }} # GH_ACTIONS_TOKEN ë„ ë”°ë¡œ ë§Œë“¤ì–´ë’€ëŠ”ë°, default tokenì¸ ë“¯.
          publish_dir: ./build

