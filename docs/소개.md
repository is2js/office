---
title: 'ì†Œê°œ'
path: /about
date: '2023-03-13'
---



- https://www.youtube.com/watch?v=rB1uyE7tJKw&list=PL3Kz_hCNpKSQ5gDVSWvrQ-9COk0CLLrTs



### íŒ¨í‚¤ì§€ ì„¤ì¹˜



1. íŒ¨í‚¤ì§€ 2ê°œ ì„¤ì¹˜

    - `frontmatter`: md renderì‹œ ë¬´ì‹œë˜ëŠ” front matter dataë¥¼ íŒŒì‹±í•˜ê¸° ìœ„í•´ì„œ

        - `poetry add frontmatter`

        ![image-20250305193844779](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250305193844779.png)

    - `markdown`: mdë¥¼ htmlë¡œ ë Œë”ë§

        - **íŒ¨í‚¤ì§€ì‡ìŠˆë¡œ 3.11.6 ë²„ì „ì—ì„œ poetry addê°€ ì•ˆë¨.**

    â€‹	![image-20250305193854759](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250305193854759.png)

    â€‹	-  `pip install markdown`

- **ê·¸ëƒ¥ venv -> pip installë¡œ 2ê°œ ì„¤ì¹˜í•¨.**

```
.\.venv\Scripts\activate

pip install frontmatter markdown
```







2. markdown.markdown(' ë§ˆí¬ë‹¤ìš´# ë“±ì˜ í…ìŠ¤íŠ¸ ')ë¥¼ printí•˜ë©´ htmlë¡œ ë‚˜ì˜¨ë‹¤.

    - `#`ì´ `h1íƒœê·¸`ë¡œ ë°”ê»´ì„œ ë‚˜ì˜¨ë‹¤.

    ```python
    import markdown
    
    if __name__ == '__main__':
        import markdown
        print(markdown.markdown('#Hellow markdown'))
        
    # <h1>Hellow markdown</h1>
    ```

    



### clië¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ setup.py(nameì´ cliëª…ë ¹ì–´)

- http://stackoverflow.com/questions/56534678/how-to-create-a-cli-in-python-that-can-be-installed-with-pip

![image-20250305200916047](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250305200916047.png)





1. ë£¨íŠ¸ì— setup.py ìƒì„±

    - **í•µì‹¬ì€ entry_pointsì•ˆì— console_scripts ë‚´ë¶€ì— `name = íŒ¨í‚¤ì§€ëª…(í´ë”/init).íŒ¨í‚¤ì§€ë‚´ì‹¤í–‰pyíŒŒì¼ëª…:ë‚´ë¶€í•¨ìˆ˜ëª…`ì„ ë„£ì–´ì£¼ëŠ” ê²ƒ ê°™ë‹¤.**
    - **ì¶”í›„ `name`ì´ `cliëª…ë ¹ì–´`ê°€ ë˜ë¯€ë¡œ ì§§ê²Œ ì§“ëŠ”ë‹¤..**

    ```python
    from distutils.core import setup
    
    setup(
        name='mdr',
        version='1.0.0',
        description='Markdown Renderer',
        author='JaeSeong Cho',
        author_email='tingstyle1@gmail.com',
        packages=['markdown_renderer'],
        entry_points={
            'console_scripts': [
                'mdr = markdown_renderer.cli:cli_entry_point'
            ],
        },
        install_requires=[
            'markdown',
            'frontmatter',
        ],
    )
    ```

2. **ëª…ì‹œí•´ë‘” pythoníŒ¨í‚¤ì§€ í´ë”ì¸ `markdown_renderer` ìƒì„± ë° `cli.py` ë° `ë‚´ë¶€ í•¨ìˆ˜ cli_entry_point` ì‘ì„±**

    ![image-20250305202048414](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250305202048414.png)

    ```python
    def cli_entry_point():
        print('cli_entry_point')
    ```

    



3. ì˜ìƒì—ì„œëŠ” pip install -eë¡œ ì˜¬ë ¤ë†“ê³  ì„¤ì¹˜í•˜ëŠ” ê²ƒ ê°™ì€ë° `pip install setup.py`ë¥¼ í•˜ë©´ cliê°€ ì‘ë™í•˜ê²Œ ëœë‹¤.

    ```shell
    (.venv) PS C:\Users\cho_desktop\PycharmProjects\markdown> mdr
    cli_entry_point
    ```

    



4. **ì´ì œ í•¨ìˆ˜ì‘ì„± ë•Œë§ˆë‹¤ `pip install setup.py`ë¥¼ í•´ì¤˜ì•¼í•˜ë¯€ë¡œ, ì¼ë‹¨ ë‚´ìš©ë¶€í„° ì‘ì„±í•˜ì—¬ ë‚´ë¶€ì‹¤í–‰ì‹œí‚¤ì.**

    ```python
    def cli_entry_point():
        print('cli_entry_point22')
        
        
        
    if __name__ == '__main__':
        cli_entry_point()
    ```

    





### cli setupí•´ì„œ ì‚¬ìš©ì „ cli_entry_point í•¨ìˆ˜ ë‚´ìš© ì‘ì„±

1. mdë“¤ì´ ìˆëŠ” í´ë”ê°€ ì¡´ì¬í•´ì•¼í•œë‹¤

    ```python
    import os.path
    
    
    def cli_entry_point():
        SOURCE_DIR = '../docs'
        OUTPUT_DIR = '../html'
    
        # 1) sourceí´ë”ëª…ì´ ì¡´ì¬í•˜ê³  && ê·¸ê²Œ ì§„ì§œ ë””ë ‰í† ë¦¬ë¼ë©´,
        if os.path.exists(SOURCE_DIR) and os.path.isdir(SOURCE_DIR):
            ...
        else:
            print(f"'{SOURCE_DIR}' í´ë”ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")
    
    
    
    
    
    
    
    if __name__ == '__main__':
        cli_entry_point()
    ```

    





2. ë‚´ë¶€ í´ë” ë° íŒŒì¼ë“¤ì„ `os.walk()`ë¡œ ê°€ì ¸ì˜¨ë‹¤

    ```python
    # 1) sourceí´ë”ëª…ì´ ì¡´ì¬í•˜ê³  && ê·¸ê²Œ ì§„ì§œ ë””ë ‰í† ë¦¬ë¼ë©´,
    if os.path.exists(SOURCE_DIR) and os.path.isdir(SOURCE_DIR):
        # 2) os.walkë¡œ root, ë‚´ë¶€dirs, filesë¥¼ ê°€ì ¸ì˜¨ë‹¤.
        for root, inner_dirs, files in os.walk(SOURCE_DIR):
            # 3) rootë¥¼ ì¶œë ¥í•œë‹¤.
            print(root)
            # 4) dirsë¥¼ ì¶œë ¥í•œë‹¤.
            print(inner_dirs)
            # 5) filesë¥¼ ì¶œë ¥í•œë‹¤.
            print(files)
    ```

    

3. **íŒŒì¼ì¤‘ì— .mdë¡œ ëë‚´ëŠ” ê²ƒë“¤ë§Œ root + íŒŒì¼ì´ë¦„ì„ ê°€ì ¸ì˜¨ë‹¤.**

    ```python
    files_to_render = []
    
    # 2) os.walkë¡œ root, ë‚´ë¶€dirs, filesë¥¼ ê°€ì ¸ì˜¨ë‹¤.
    for root, inner_dirs, files in os.walk(SOURCE_DIR):
        # print(root) # ../docs
        # print(inner_dirs) # print(files)
        # [] # ['1 cli.md']
    
        for filename in files:
            # 3) íŒŒì¼ëª…ì´ .mdë¡œ ëë‚˜ëŠ”ì§€ í™•ì¸í•˜ê³  ê·¸ë ‡ë‹¤ë©´, root + filenameì„ í•©ì³ì„œ íŒŒì¼ ê²½ë¡œë¥¼ ì €ì¥í•œë‹¤. 
            if filename.lower().endswith('.md'):
                files_to_render.append(os.path.join(root, filename))
                
                
    # print(files_to_render) # ['../docs\\1 cli.md']
    
    ```

    



4. **ë²„ì „ì°¨ì´ë¡œ frontmatter.load()ëŠ” ì•ˆë˜ì„œ, f.read() -> frontmatter.FrontMatter.read()ë¡œ ì½ì–´ì„œ í™•ì¸í•´ë´¤ìŒ.**

    - **ë¬¸ì œëŠ” `frontmatterê°€ ì—†ìœ¼ë©´ ì•„ì˜ˆ bodyë„ None`**

    ```python
    # 4) ëœë”í•  md fileë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ, frontmatterë¥¼ ë½‘ì•„ë‚´ê³ , markdownìœ¼ë¡œ ë³€í™˜í•œë‹¤.
    for file_to_render in files_to_render:
        with open(file_to_render, 'r', encoding='utf-8') as f:
            content = f.read()
            # c = frontmatter.loads(content) # ë²„ì „ ì°¨ì´?
            post = frontmatter.Frontmatter.read(content)
            print(post)
            # {'attributes': None, 'body': '', 'frontmatter': ''}
            # => mdíŒŒì¼ì— ---ë¡œ í”„ë¡ íŠ¸ë§¤í„°ë¥¼ ë„£ê³  ë‚˜ë©´
            # {
            #   'attributes': {'title': 'ë„£ì—ˆë‹¤'},
            #   'body': '- https://www.youtube.com/wat',
            #   'frontmatter': "\ntitle: 'ë„£ì—ˆë‹¤'\n"
            # }
    ```

    - frontmatterê°€ ì—†ìœ¼ë©´ ì¼ë‹¨ì€ passí•˜ë„ë¡ í•œë‹¤.

    ```python
    # 4) ëœë”í•  md fileë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ, frontmatterë¥¼ ë½‘ì•„ë‚´ê³ , markdownìœ¼ë¡œ ë³€í™˜í•œë‹¤.
            for file_to_render in files_to_render:
                with open(file_to_render, 'r', encoding='utf-8') as f:
                    content = f.read()
                    # c = frontmatter.loads(content) # ë²„ì „ ì°¨ì´?
                    post = frontmatter.Frontmatter.read(content)
                    if not post['attributes']:
                        # {'attributes': None, 'body': '', 'frontmatter': ''}
                        print(f'frontmatterê°€ ì—†ëŠ” íŒŒì¼: {file_to_render}')
                        continue
                    else:
                        # {
                        #   'attributes': {'title': 'ë„£ì—ˆë‹¤'},
                        #   'body': '- https://www.youtube.com/wat',
                        #   'frontmatter': "\ntitle: 'ë„£ì—ˆë‹¤'\n"
                        # }
                        print(f"frontmatter: {post['attributes']}")
                        print(f"body: {post['body'][:10]}")
    ```

5. frontmatterë¥¼ ê°€ì§„ postê°ì²´ì—ì„œ bodyë§Œ markdown.markdownìœ¼ë¡œ ëœë”ë§í•œ ë’¤, htmlíŒŒì¼ë¡œ ì“´ë‹¤.

    - **ì´ ë•Œ, ìƒëŒ€ê²½ë¡œ ìœ ì§€ì¤‘ì´ë©°, joinì‹œ ë¬¸ì œê°€ ìƒê²¨, OUTPUT_DIRì„ SOURCE_DIRë¡œ ëŒ€ì²´í•˜ë„ë¡ htmlíŒŒì¼ëª…ì„ ìƒì„±í•œë‹¤.**

    ```python
    # 4) ëœë”í•  md fileë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ, frontmatterë¥¼ ë½‘ì•„ë‚´ê³ , markdownìœ¼ë¡œ ë³€í™˜í•œë‹¤.
    for file_to_render in files_to_render:
        with open(file_to_render, 'r', encoding='utf-8') as f:
            content = f.read()
            # c = frontmatter.loads(content) # ë²„ì „ ì°¨ì´?
            post = frontmatter.Frontmatter.read(content)
    
            # 5) frontmatterì—†ëŠ” íŒŒì¼ì€ pass
            if not post['attributes']:
                # {'attributes': None, 'body': '', 'frontmatter': ''}
                print(f'frontmatterê°€ ì—†ëŠ” íŒŒì¼: {file_to_render}')
                continue
    
            # {
            #   'attributes': {'title': 'ë„£ì—ˆë‹¤'},
            #   'body': '- https://www.youtube.com/wat',
            #   'frontmatter': "\ntitle: 'ë„£ì—ˆë‹¤'\n"
            # }
    
            # 6) frontmatterê°€ ìˆëŠ” íŒŒì¼ì€, markdownìœ¼ë¡œ ë³€í™˜í›„ htmlë¡œ ì¨ì„œ ì €ì¥í•œë‹¤.
            html = markdown.markdown(post['body'])
    
            # 7) mdíŒŒì¼ ê²½ë¡œ ê·¸ëŒ€ë¡œ, htmlë¡œ ë°”ê¿”ì„œ ì €ì¥
            # ->  OUTPUT_DIRSOURCE_DIRì„ ê³µë°±ìœ¼ë¡œ ëŒ€ì²´ ì œê±° + mdë¥¼ htmlë¡œ êµì²´ 2ë²ˆ replace
            # output_file = os.path.join(OUTPUT_DIR, file_to_render.replace(SOURCE_DIR, '').replace('.md', '.html'))
            output_file = os.path.join(file_to_render.replace(SOURCE_DIR, OUTPUT_DIR).replace('.md', '.html'))
    
            # 8) íŒŒì¼ê²½ë¡œ + os.path.dirname() ê²½ë¡œë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
            os.makedirs(os.path.dirname(output_file), exist_ok=True)
    
            # 9) htmlë¡œ ë³€í™˜ëœ ë‚´ìš©ì„ íŒŒì¼ì— ì“´ë‹¤.
            with open(output_file, 'w', encoding='utf-8') as f:
                f.write(html)
    ```

    ![image-20250305221423272](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250305221423272.png)






### .renderignoreíŒŒì¼ì„ ë§Œë“¤ì–´ì„œ, ê±°ê¸°í¬í•¨ëœ ê²ƒì€ renderëª©ë¡ì—ì„œ ì œì™¸ì‹œí‚¤ê¸°

1. source_dirì¸ `../docs`ì— `.renderignore` íŒŒì¼ì„ ë§Œë“ ë‹¤.

2. os.walkë¡œ ìˆœíšŒí•˜ê¸° ì „ì—, source_dirì— ignoreíŒŒì¼ì´ ì¡´ì¬í•˜ë©´, ê±°ê¸°ì— ìˆëŠ” íŒŒì¼ëª…ì„ ëª¨ì•„ë‘”ë‹¤.

    ```python
    # 1) sourceí´ë”ëª…ì´ ì¡´ì¬í•˜ê³  && ê·¸ê²Œ ì§„ì§œ ë””ë ‰í† ë¦¬ë¼ë©´,
    if os.path.exists(SOURCE_DIR) and os.path.isdir(SOURCE_DIR):
    
        files_to_render = []
    
        files_to_render_ignore = []
        # 10) SOURCE_DIRì— .renderignore íŒŒì¼ì´ ì¡´ì¬í•˜ë©´ ì½ì–´ì„œ ëª¨ì•„ë‘”ë‹¤.
        render_ignore = os.path.join(SOURCE_DIR, '.renderignore')
        if os.path.exists(render_ignore):
            with open(render_ignore, 'r', encoding='utf-8') as f:
                files_to_render_ignore = f.read().split('\n')
    
    
                # 2) os.walkë¡œ root, ë‚´ë¶€dirs, filesë¥¼ ê°€ì ¸ì˜¨ë‹¤.
                for root, inner_dirs, files in os.walk(SOURCE_DIR):
    ```

    

3. os.walkì¤‘ì—ëŠ” filesë‹¨ìœ„ë¡œ ë‚˜ì˜¤ë‹ˆê¹Œ, ê°œë³„íŒŒì¼ì„ mdíŒŒì¼ì¸ì§€ í™•ì¸í•˜ì—¬ appendí•˜ê¸° ì „ì—,  renderignoreì— í¬í•¨ë˜ë©´ ë¬´ì‹œí•œë‹¤.

    - ì½”ë“œ ë¦¬íŒ©í† ë§ ë“¤ì–´ê°

    - ì¡°ê±´ 2ê°œ

        - .renderignoreíŒŒì¼ pass
        - mdíŒŒì¼ë„ ì•„ë‹ˆê³  renderignoreë„ ì•„ë‹ˆë¼ë©´ pass
        - mdíŒŒì¼ì´ë¼ë„ renderignoreì— í¬í•¨ë˜ë©´ pass

        ```python
        # 2) os.walkë¡œ root, ë‚´ë¶€dirs, filesë¥¼ ê°€ì ¸ì˜¨ë‹¤.
        for root, inner_dirs, file_names in os.walk(SOURCE_DIR):
        
            # print(root) # ../docs
            # print(inner_dirs)
            # print(file_names)
            # [] # ['1 cli.md']
        
            # 11) mdíŒŒì¼ì¸ì§€ í™•ì¸í•˜ê¸° ì „ì—
            # appendë  file(ìƒëŒ€ê²½ë¡œ)ê³¼, fileì˜ ë§¨ ë íŒŒì¼ëª… file_basenameì„ ì´ìš©í•˜ì—¬ ê²€ì‚¬
            for file_name in file_names:
                file = os.path.join(root, file_name)
                file_basename = os.path.basename(file)
        
                # 11-1) renderignore íŒŒì¼ì´ë©´ pass
                if file_basename == '.renderignore':
                    continue
        
                # 11-2) mdíŒŒì¼ë„ ì•„ë‹ˆë©´ì„œ .renderignoreë„ ì•„ë‹Œ ê²ƒ -> pass
                if not file_basename.lower().endswith('.md'):
                    print(f'  SOURCE_DIR í´ë”ì— mdíŒŒì¼ì´ ì•„ë‹Œ ê²ƒì´ ì¡´ì¬ >> {file_basename}')
                    continue
        
                # 11-3) íŒŒì¼ëª…ì´ .renderignoreì— í¬í•¨ë˜ì–´ ìˆë‹¤ë©´, pass
                if file_basename in files_to_render_ignore:
                    print(f"  ì œì™¸ëœ íŒŒì¼ ëª©ë¡ >> {file_basename}")
                    continue
        
                # 3) íŒŒì¼ëª…ì´ .mdë¡œ ëë‚˜ëŠ”ì§€ í™•ì¸í•˜ê³  ê·¸ë ‡ë‹¤ë©´, root + filenameì„ í•©ì³ì„œ íŒŒì¼ ê²½ë¡œë¥¼ ì €ì¥í•œë‹¤.
                # if filename.lower().endswith('.md'):
                files_to_render.append(file)
        
            print(f"files_to_render  >> {files_to_render}")
        ```

        





### jinja2 ë„ì… - renderí•˜ë©´ì„œ frontmatterì •ë³´ë„ ë³€ìˆ˜ë¡œ ë„˜ê¸¸ ìˆ˜ ìˆë‹¤?!

1. ì„¤ì¹˜ ë° setup.pyì— ì¶”ê°€í•˜ê¸°

    ```shell
    (.venv) PS C:\Users\cho_desktop\PycharmProjects\markdown> pip install jinja2
    ```

    ```python
    from distutils.core import setup
    
    setup(
        name='mdr',
        version='1.0.0',
        description='Markdown Renderer',
        author='JaeSeong Cho',
        author_email='tingstyle1@gmail.com',
        packages=['markdown_renderer'],
        entry_points={
            'console_scripts': [
                'mdr = markdown_renderer.cli:cli_entry_point'
            ],
        },
        install_requires=[
            'markdown',
            'frontmatter',
            'jinja2'
        ],
    )
    ```

    





2. output_dirì„ ../htmlì—ì„œ buildë¡œ ë³€ê²½

    ```python
    def cli_entry_point():
        SOURCE_DIR = '../docs'  # ìƒëŒ€ê²½ë¡œ
        # OUTPUT_DIR = '../html'  # ìƒëŒ€ê²½ë¡œ
        OUTPUT_DIR = 'build'  # ìƒëŒ€ê²½ë¡œ
    ```

    

    - **íŒ¨í‚¤ì§€ > buildí´ë”ì— ë¹Œë“œëœë‹¤.**

    ![image-20250306101611829](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306101611829.png)





3. íŒ¨í‚¤ì§€ ë‚´ë¶€ template_dirë¥¼ webìœ¼ë¡œ ì •í•˜ê³ , jinja2í™˜ê²½ë³€ìˆ˜ë¡œ envë³€ìˆ˜ì— templateí´ë”ë¥¼ ì§€ì •í•œë‹¤.

    ```python
    ## Render Logic
    # 12) ìˆœíšŒí•˜ë©° f.read()í• í…ë°, ê·¸ ì „ì—, jinja2 envíŒŒì¼ì„ ë§Œë“¤ê³ , env.get_template()ì„ ì´ìš©í•˜ì—¬ ì±„ìš¸ í…œí”Œë¦¿ì„ ê°€ì ¸ì˜¨ë‹¤.
    env = jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR))
    # 4) ëœë”í•  md fileë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ, frontmatterë¥¼ ë½‘ì•„ë‚´ê³ , markdownìœ¼ë¡œ ë³€í™˜í•œë‹¤.
    for file_to_render in files_to_render:
        with open(file_to_render, 'r', encoding='utf-8') as f:
            content = f.read()
    ```

    ```python
    def cli_entry_point():
        SOURCE_DIR = '../docs'  # ì†ŒìŠ¤ëŠ” íŒ¨í‚¤ì§€ ë°–ì˜ ë£¨íŠ¸ í´ë”ì—ì„œ
        # OUTPUT_DIR = '../html'  # ìƒëŒ€ê²½ë¡œ
        OUTPUT_DIR = 'build'  # ë¹Œë“œëŠ” íŒ¨í‚¤ì§€ ë‚´ë¶€ì˜ í´ë”ì—ì„œ
        TEMPLATE_DIR = 'md_templates' # í…œí”Œë¦¿ë„ íŒ¨í‚¤ì§€ë‚´ë¶€ í´ë”ì—ì„œ ì œê³µí•  ê²ƒìœ¼ë¡œ ì§€ì •
    ```

    



3. envë³€ìˆ˜ì— ì íŒ template_dirì—ì„œ contents.htmlì„ ê°€ì ¸ì˜¤ë„ë¡ íŒ¨í‚¤ì§€ë‚´ë¶€ í´ë”ìƒì„±, contents.html ìƒì„±ì„ í•´ì¤€ë‹¤.

    ![image-20250306102359473](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306102359473.png)

    ```python
    env = jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR))
    content_template = env.get_template('contents.html')
    ```

    







4. ì´ì œ f.write()ë¡œ htmlì„ ì“°ê¸°ì „ì—, **templateë³€ìˆ˜.render(body=html)**ì„ í†µí•´ `í•œë²ˆ renderëœ html`ì„ ì“°ê²Œ í•œë‹¤.

    ```python
    # 9) htmlë¡œ ë³€í™˜ëœ ë‚´ìš©ì„ íŒŒì¼ì— ì“´ë‹¤.
    # 13) html -> template.render()í•œ ê²ƒì„ ì“°ë„ë¡ ë¡œì§ ì¶”ê°€
    content = content_template.render(title=post['attributes']['title'], body=html)
    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(content)
    ```

    - **ì´ëŒ€ë¡œ ì‹¤í–‰í•˜ë©´ 1 cli.html ë¹Œë“œëœ ê²ƒì—ëŠ” ì•„ë¬´ê²ƒë„ ì•ˆëœ¬ë‹¤. ì™œëƒë©´ ë³€ìˆ˜ë¡œ ë„˜ê¸´ ê²ƒì„ htmlì—ì„œ jinjaë¬¸ë²•ìœ¼ë¡œ ë°›ì•„ì„œ ì¨ì•¼í•˜ê¸° ë•Œë¬¸**

    ![image-20250306103119440](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306103119440.png)





5. **ì´ì œ md_templates í´ë”ì— `base.html`ì„ ë§Œë“¤ê³  `detail.html`ì€ base.html ìƒì†í•œ ë’¤, ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•´ë³´ì.**

    ```html
    <!DOCTYPE html>
    <html lang="ko">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
    
    </head>
    <body>
        {% block content %}
        {% endblock %}
    </body>
    </html>
    ```

    

6. **body=htmlì„ ë³€ìˆ˜ë¡œ ë°›ì€ contents.htmlì€ baseìƒì† ì´í›„, `block`ì—ì„œ `{{ body }}`ë¥¼ ì‚¬ìš©í•˜ì—¬ í‘œê¸°ë˜ê²Œ í•œë‹¤.**

    ```html
    {% extends "base.html" %}
    
    {% block content %}
    <h1>ì œëª©</h1>
    {{ body }}
    {% endblock content %}
    ```

    ![image-20250306104745458](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306104745458.png)
    ![image-20250306104755097](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306104755097.png)





###  index.html ë„ì…í•˜ê¸°

- ê°œë³„ contentsë“¤ì„ render -> ì“°ê¸° í•œ ì´í›„ì— indexëŠ” ë”°ë¡œë‹¤.

1. template ë³€ìˆ˜ ìƒì„±

    - htmlì—ëŠ” test=, posts ë³´ë‚´ê¸°

    ```python
    ## Render index
    index_template = env.get_template('index.html')
    ```

    ```html
    {% extends "base.html" %}
    
    {% block title %}Home{% endblock %}
    
    {% block content %}
    
    <h2>Recent Posts</h2>
    
    {{ test }}
    
    {% for post in posts[0:5] %}
    {% endfor %}
    
    
    {% endblock %}
    ```

    





2. ê°œë³„ postsë¥¼ ì¨ì•¼í•˜ëŠ”ë° ì¼ë‹¨ì€ ì‚¬ìš©x

    ```python
    ## Render index
    index_template = env.get_template('index.html')
    index = index_template.render(test='index test', posts=[])
    index_file = os.path.join(OUTPUT_DIR, 'index.html')
    with open(index_file, 'w', encoding='utf-8') as f:
        f.write(index)
    ```

    ![image-20250306110937725](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306110937725.png)






### manfest.in ë„ì… -> íŒ¨í‚¤ì§€ì— templateíŒŒì¼ë„ ê°™ì´ ì„¤ì¹˜ë˜ê²Œ

- MANIFEST.in íŒŒì¼ì€ íŒŒì´ì¬ íŒ¨í‚¤ì§€ì— í¬í•¨ì‹œí‚¤ê³  ì‹¶ì€ íŒŒì¼ì„ ë‹´ëŠ” íŒŒì¼ì…ë‹ˆë‹¤. readme íŒŒì¼ì´ë‚˜ ë¼ì´ì„ ìŠ¤ íŒŒì¼ê³¼ ê°™ì€ íŒŒì¼ì´ ì´ì— í•´ë‹¹í•©ë‹ˆë‹¤. 

MANIFEST.in íŒŒì¼ì˜ ìš©ë„

- ë‚´ë¶€ íŒ¨í‚¤ì§€ ë””ë ‰í„°ë¦¬ì— ìˆì§€ ì•Šì§€ë§Œ í¬í•¨ì‹œí‚¤ê³  ì‹¶ì€ íŒŒì¼ì„ ë‹´ìŠµë‹ˆë‹¤. 
- ì†ŒìŠ¤ ë°°í¬íŒì„ ë§Œë“¤ ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. 
- MANIFEST.in íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ íŒŒì¼ ì§‘í•©ë§Œìœ¼ë¡œ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë§Œë“­ë‹ˆë‹¤. 



1. rootì— ìƒì„±í•˜ì—¬ recursiveë¡œ íŒ¨í‚¤ì§€ì— templateíŒŒì¼ ì „ì²´ë¥¼ í¬í•¨ì‹œí‚¤ê²Œ í•œë‹¤.

    ```
    recursive-include markdown_renderer/md_templates *
    ```

2. setup.pyì— package_dataë¡œ ëª…ì‹œí•´ì¤€ë‹¤.

    - setuptoolsë¥¼ ì‚¬ìš©í•˜ì§„ ì•Šì§€ë§Œ importí•´ì£¼ë¼ê³  í•œë‹¤.

    ```python
    import setuptools
    from distutils.core import setup
    
    setup(
        name='mdr',
        version='1.0.0',
        description='Markdown Renderer',
        author='JaeSeong Cho',
        author_email='tingstyle1@gmail.com',
        packages=['markdown_renderer'],
        entry_points={
            'console_scripts': [
                'mdr = markdown_renderer.cli:cli_entry_point'
            ],
        },
        install_requires=[
            'markdown',
            'frontmatter',
            'jinja2'
        ],
        package_data={
            'markdown_renderer': ['md_templates/*']
        }
    )
    ```

    





3. `python setup.py bdist_wheel` ì´ë‚˜ `python setup.py install`ì´ë‚˜ ë™ì¼í•œ ë“¯í•˜ë‹¤.

    - **`bdist_wheel`ë¡œ  ì‹¤í–‰í•˜ë©´ distí´ë”ê°€ ìƒì„±ë˜ë©°, ë‚´ë¶€ì— wheel íŒŒì¼ì´ ìƒì„±ëœë‹¤.**

        - ì´ê±´ unzipìœ¼ë¡œ ë§¥ì—ì„œ í’€ì–´ì•¼í•œë‹¤ ë‚˜ëŠ” installë¡œ í•˜ì

            ![image-20250306112032399](https://raw.githubusercontent.com/is2js/screenshots/main/image-20250306112032399.png)

    - ê·¸ë˜ë„ ì—ëŸ¬

        ```
        error: [WinError 32] ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì¼ì„ ì‚¬ìš© ì¤‘ì´ê¸° ë•Œë¬¸ì— í”„ë¡œì„¸ìŠ¤ê°€ ì•¡ì„¸ìŠ¤ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤: 'c:\\users\\cho_desktop\\pycharmprojects\\markdown\\.venv\\lib\\site-packages
        \\mdr-1.0.0-py3.11.egg'
        
        ```

        

    - `mdr` ëª…ë ¹ì–´ë¡œ í•´ë´¤ëŠ”ë°, íŒŒì¼ëª…ë§Œ ëœ¬ë‹¤?

        









###  ë¦¬íŒ©í† ë§í¬í•¨, postsë¡œ ì „í™˜ indexì²˜ë¦¬ê¹Œì§€



#### renderì „ì— posts ë¼ê³  ë¯¸ë¦¬ renderí•  ê²½ë¡œ ê²€ì‚¬í›„ ëª¨ì•„ë†“ê¸° + pathì†ì„± ì²˜ë¦¬



- os.walkë¡œ ì½ì€ íŒŒì¼ì˜ ê²½ë¡œ file -> full_path

- renderí•  file ê²½ë¡œ -> files_full_path_to_render

- íŒ¨í‚¤ì§€ë‚´ buildí´ë” ì‚­ì œë¡œì§ ë¨¼ì € í•˜ë„ë¡ ì¶”ê°€

    ```python
    # 14) buildí´ë” ì‚­ì œ ë¯¸ë¦¬ í•´ë†“ê¸°
    if os.path.exists(OUTPUT_DIR):
        shutil.rmtree(OUTPUT_DIR)
    ```

- renderì „ postì •ë³´ë¥¼ ë¨¼ì € ì¶”ì¶œí•œë‹¤.

    - path ì†ì„±ì´ ìˆê³ , ê·¸ê²Œ ì¤‘ë³µì´ ì•„ë‹ˆë¼ë©´ ê°€ëŠ¥

    ```python
    post_paths = {} # ëª¨ë“  postì— ëŒ€í•œ pathë“¤ì„ ëª¨ì€ë‹¤. TODO: DBì—ì„œ ê²€ì‚¬
    # 4) ëœë”í•  md fileë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ, frontmatter ì¶”ì¶œ
    for file_full_path in files_full_path_to_render:
        with open(file_full_path, 'r', encoding='utf-8') as f:
            content = f.read()
            post = frontmatter.Frontmatter.read(content)  # c = frontmatter.loads(content) # ë²„ì „ ì°¨ì´?
    
            # 5) frontmatterì—†ëŠ” íŒŒì¼ì€ pass
            if 'attributes'not in post:
                # {'attributes': None, 'body': '', 'frontmatter': ''}
                # raise ValueError('í•´ë‹¹íŒŒì¼ì— frontmatterê°€ ë¹ ì§: ', file_full_path)
                print(f'ğŸ¤£ frontmatterê°€ ì—†ëŠ” íŒŒì¼ ìˆ˜ì • ìš”ë§: {file_full_path}')
                continue
    
                ## frontìš© pathì§€ì •(ë°±ì—”ë“œ ë‹¬ë¦¬ë©´ í•„ìš” ì—†ì„ ë“¯)
                # 15-1) path ì†ì„±ì´ ìˆë‹¤ë©´, íŒŒì¼ëª…ì´ ì•„ë‹ˆë¼, [path].htmlë¡œ ìƒëŒ€ ê²½ë¡œë¥¼ ì§€ì •í•œë‹¤.
                if 'path' in post['attributes']:
                    # 15-2) pathëŠ” ì¤‘ë³µì´ ì•„ë‹ˆì—¬ì•¼ í•œë‹¤.
                    if post['attributes']['path'] in post_paths:
                        # raise ValueError(f'ì¤‘ë³µëœ pathê°€ ìˆìŠµë‹ˆë‹¤: {post["path"]}')
                        print(f'ğŸ¤£ ì¤‘ë³µëœ pathë¥¼ ê°€ì§„ íŒŒì¼ : {file_full_path}')
                        print(f'post_paths >> {post_paths}')
                        continue
                        # 15-3) ì¤‘ë³µì´ ì•„ë‹Œ pathëŠ” Trueë¡œ ì²´í¬í•´ì„œ ì¶”í›„ ì¤‘ë³µì´ ì•ˆë˜ê²Œ í•œë‹¤.
                        post_paths[post['path']] = True
    ```

    - ì´ë ‡ê²Œ ëª¨ì€ ê²ƒë“¤ì„ postsë¼ê³  í•œë‹¤.

    ```python
            posts = []  # 
            post_paths = {}  # ëª¨ë“  postì— ëŒ€í•œ pathë“¤ì„ ëª¨ì€ë‹¤. TODO: DBì—ì„œ ê²€ì‚¬
            # 4) ëœë”í•  md fileë“¤ì„ ìˆœíšŒí•˜ë©´ì„œ, frontmatter ì¶”ì¶œ
            for file_full_path in files_full_path_to_render:
                with open(file_full_path, 'r', encoding='utf-8') as f:
                    content = f.read()
                    post = frontmatter.Frontmatter.read(content)  # c = frontmatter.loads(content) # ë²„ì „ ì°¨ì´?
    
                    # 5) frontmatterì—†ëŠ” íŒŒì¼ì€ pass
                    if 'attributes' not in post:
                        # {'attributes': None, 'body': '', 'frontmatter': ''}
                        # raise ValueError('í•´ë‹¹íŒŒì¼ì— frontmatterê°€ ë¹ ì§: ', file_full_path)
                        print(f'ğŸ¤£ frontmatterê°€ ì—†ëŠ” íŒŒì¼ ìˆ˜ì • ìš”ë§: {file_full_path}')
                        continue
    
                    ## frontìš© pathì§€ì •(ë°±ì—”ë“œ ë‹¬ë¦¬ë©´ í•„ìš” ì—†ì„ ë“¯)
                    # 15-1) path ì†ì„±ì´ ìˆë‹¤ë©´, íŒŒì¼ëª…ì´ ì•„ë‹ˆë¼, [path].htmlë¡œ ìƒëŒ€ ê²½ë¡œë¥¼ ì§€ì •í•œë‹¤.
                    if 'path' in post['attributes']:
                        # 15-2) pathëŠ” ì¤‘ë³µì´ ì•„ë‹ˆì—¬ì•¼ í•œë‹¤.
                        if post['attributes']['path'] in post_paths:
                            # raise ValueError(f'ì¤‘ë³µëœ pathê°€ ìˆìŠµë‹ˆë‹¤: {post["path"]}')
                            print(f'ğŸ¤£ ì¤‘ë³µëœ pathë¥¼ ê°€ì§„ íŒŒì¼ : {file_full_path}')
                            print(f'post_paths >> {post_paths}')
                            continue
                        # 15-3) ì¤‘ë³µì´ ì•„ë‹Œ pathëŠ” Trueë¡œ ì²´í¬í•´ì„œ ì¶”í›„ ì¤‘ë³µì´ ì•ˆë˜ê²Œ í•œë‹¤.
                        post_paths[post['attributes']['path']] = True
    
                    posts.append(post)
    ```

    





#### datetimeì†ì„±ì„ ì¶”ê°€í•´ì•¼ ì—­ìˆœì´í›„ indexì²˜ë¦¬ ê°€ëŠ¥

- date(string, 2025-02-03)ì„ datetimeìœ¼ë¡œ ë°”ê¾¼ ë’¤, `date_parsed`ë¡œì„œ ì‹œê°„ë¹„êµí•˜ê²Œ í•œë‹¤.

    - ì´ ë•Œ, ë¯¸ë˜ ë‚ ì§œ(ì˜¤ëŠ˜ê³¼ ë¹„êµí•´ì„œ í¬ë©´) ê±´ë„ˆëˆë‹¤.

    ```python
    # 15-3) 'date' ì†ì„±ì„ ê²€ì‚¬í•˜ì—¬ ìˆë‹¤ë©´, 'date_parsed' ì†ì„±ìœ¼ë¡œ str -> datetimeìœ¼ë¡œ ë°”ê¿” ë„£ì–´ë†“ëŠ”ë‹¤.
    if 'date' in post['attributes']:
        # 'date': 2023-02-20
        post['attributes']['date_parsed'] = post['attributes']['date'].strptime('%Y-%m-%d')
    
        # 15-4) ê·¼ë°, ë°œí–‰ë‚ ì§œê°€ ë¯¸ë˜ë©´, ë¬´ì‹œí•˜ë„ë¡ í•œë‹¤.
        # ì˜¤ëŠ˜ 00ì‹œ ë°œí–‰ë²•: datetime.datetime.combine(datetime.date.today(), datetime.datetime.min.time())
        # >> datetime.datetime(2025, 3, 8, 0, 0)
        if post['date_parsed'] > datetime.datetime.combine(datetime.date.today(), datetime.datetime.min.time()):
            print(f'ğŸ¤£ ë¯¸ë˜ ë‚ ì§œì˜ íŒŒì¼ : {file_full_path}')
            continue
    ```

    



- postsë¥¼ ìˆœíšŒí•˜ë©° htmlë¡œ ì“¸ ë•Œ, sorted()ë¡œ ì •ë ¬í•œë‹¤.

    ```python
    env = jinja2.Environment(loader=jinja2.FileSystemLoader(TEMPLATE_DIR))
    content_template = env.get_template('contents.html')
    
    # 16) renderí•˜ê¸° ì „, postë¥¼ date_parsedë¡œ ì •ë ¬. ì†ì„± ì—†ì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ, .get()ìœ¼ë¡œ ê°€ì ¸ì˜¨ë‹¤.
    sorted(
        posts,
        key=lambda x: x['attributes'].get('date_parsed', datetime.datetime.min),
        reverse=True,
    )
    ```

    



- indexì²˜ë¦¬ë¥¼ ìœ„í•´ì„œ, enumerateë¡œ ìˆœíšŒí•˜ì—¬, ì´ê°¯ìˆ˜ len(posts)ì™€ ië¥¼ ë¹„êµí•˜ì—¬ next, prev postì²˜ë¦¬ë¥¼ í•œë‹¤.

    ```python
    # render
    for i, post in enumerate(posts):
        # 17-1) init prev/next
        prev_post = next_post = None
        # ì•„ì§ ì•ˆëë‚¬ìœ¼ë©´, next postê°ì²´ë¥¼ ë„£ì–´ë†“ê¸°
        if i < len(posts) - 1:
            next_post = posts[i + 1]
        # 0ë²ˆì§¸ê°€ ì•„ë‹ˆë©´, prev postê°ì²´ë¥¼ ë„£ì–´ë†“ê¸°
        if i > 0:
            prev_post = posts[i - 1]
    ```







#### prev, next postëŠ” jinjaì´í›„ ë³€ìˆ˜ë¡œ ë„˜ê²¨ì¤˜ì„œ ê°€ëŠ¥í•œ ê²ƒ



1. pathë¥¼ ì†ì„±ìœ¼ë¡œ ê°€ì§€ê³  ìˆìœ¼ë©´, **í•´ë‹¹pathì˜ ì‹œì‘í˜ì´ì§€ index.html**ë¡œ ê°„ì£¼í•˜ë„ë¡

    - `'path': /blog/nested/post ` í˜•ì‹ìœ¼ë¡œ ì¹´í…Œê³ ë¦¬ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë  ë“¯.

2. pathë¥¼ ì§ì ‘ ë„£ì–´ì¤€ postë§Œ  path + `/index.html`ë¡œ ì£¼ì†Œë¥¼ ë°”ê¿”ì£¼ê³ , ì²˜ë¦¬í•´ì¤€ë‹¤.

3. **pathë¥¼ ì•ˆë„£ì–´ì¤€ postì— ëŒ€í•´ì„œëŠ”, ì§ì ‘ íŒŒì¼ëª…ìœ¼ë¡œ ë³€ê²½í•´ì¤˜ì•¼í•˜ëŠ”ë°, ì´ë¯¸ os.walk()ë¥¼ ì§€ë‚˜ê°„ ìƒíƒœë¼. os.walk()ìˆœíšŒì‹œ attributesì— ë„£ì–´ì¤˜ì•¼í•  ê²ƒ ê°™ë‹¤.**

    ```python
    if 'path' in post['attributes']:
    	#...
    else:
    	# 15-4) pathê°€ ì—†ìœ¼ë©´, íŒŒì¼ëª… .md ->.html ë³€ê²½ ê¸°ì¡´ ë¡œì§ì´ ì ìš©í•˜ëŠ” file_full_pathë¥¼ ë‚˜ì¤‘ì— ì“°ê¸° ìœ„í•´
        #       file_full_pathì†ì„±ìœ¼ë¡œ ì €ì¥í•´ë†“ëŠ”ë‹¤.
        post['attributes']['file_full_path'] = file_full_path
    ```

4. ì´ì œ pathê°€ ìˆìœ¼ë©´ path + /index.html  ì—†ìœ¼ë©´ file_full_pathë¥¼ outfut_dir ëŒ€ì²´ ë° htmlë¡œ ë³€ê²½í•œ ì´ë¦„ì„ relative_pathë³€ìˆ˜ì— ì €ì¥í•´ë†“ëŠ”ë‹¤

5. 







