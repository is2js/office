<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <!--<link rel="stylesheet" href="css/style.css">-->

    <!-- 1. intersect plugin -->
    <!-- Alpine Plugins -->
    <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>

    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- 2. style태그로 필요한 css 미리 작성-->
    <style>
        [x-cloak] {
            display: none !important;
        }

        .bg-black {
            background-color: black;
        }

        /* 7. secetion이 sticky 효과를 주려면 css로 주면 된다. */
        .sections {
            /* body scroll대신 section scroll이 되기 위해선, sections부모에 overflow:auto */
            overflow: auto;
            height: 100vh;
            /* y mandatory로 snapping 효과를 만든다.*/
            -ms-scroll-snap-type: y mandatory;

            scroll-snap-type: y mandatory;

            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
            /* 마지막, 자식들은 스냅 align까지 지정해줘야 거기로 정렬된다.*/

            > div {
                scroll-snap-align: center;
            }
        }
    </style>

</head>
<!-- 3. body에 active 섹션index 지정 -->
<!-- 12. 이제 흰/검 테마로 나눠서 작동할 수 있도록 첫번째는 white: true 변수를 초기화하고 -->
<body class="bg-gray-100" x-data="{
        activeSection: 1,
        slides: [
            {
                image: 'section1.png',
                title: '약침치료',
                subtitle: '약침치료는 현대 한의원에서 치료효과를 위해 치료에 포함됩니다.',

            },
            {
                image: 'section2.png',
                title: '신랑신부 소개',
                subtitle: '약침치료는 현대 한의원에서 치료효과를 위해 치료에 포함됩니다.',
            },
            {
                image: 'section3.png',

            }
        ],

    }">

<!-- 점(dot) 네비게이션 -->
<style>

    @keyframes wheelAni {
        0% {
            transform: translate(0, 0);
        }

        50% {
            transform: translate(0, 3px);
        }

        100% {
            transform: translate(0, 0);
        }

    }

    .floatNav {
        z-index: 12;
        margin: 0;
        padding: 0;
        border: 0;
        background: transparent;
        letter-spacing: -0.04rem;

        top: 120px;
        left: 20px;

        & li {
            list-style: none;
            line-height: 1;

            font-size: 14px;
        }

        > .scroll-down {
            &::before {
                content: '';
                display: block;
                width: 14px;
                height: 20px;
                /*https://www.jaseng.co.kr/images/renewal-v3/mouse-w.png*/
                background: url(https://www.jaseng.co.kr/images/renewal-v3/mouse-bk.png) no-repeat 50% 0;
            }

            &::after {
                content: '';
                display: block;
                width: 14px;
                height: 10px;
                margin-top: 5px;
                /*https://www.jaseng.co.kr/images/renewal-v3/mouse-w-arr.png*/
                background: url(https://www.jaseng.co.kr/images/renewal-v3/mouse-bk-arr.png) no-repeat 50% 0;

                animation: wheelAni 0.7s infinite;
            }

            &.white::before {
                background: url(https://www.jaseng.co.kr/images/renewal-v3/mouse-w.png) no-repeat 50% 0;
            }

            &.white::after {
                background: url(https://www.jaseng.co.kr/images/renewal-v3/mouse-w-arr.png) no-repeat 50% 0;
            }
        }

    }
</style>
<div class="fixed flex flex-col justify-center space-y-4 px-10
    floatNav
">
    <ul>
        <template x-for="(slide, i) in slides" :key="i">
            <li class="w-auto">
                <a :href="`#section-${i}`"
                   class="cursor flex items-center"
                   x-data="{ hovered: false }"
                   @mouseenter="hovered = true"
                   @mouseleave="hovered = false"
                >
                    <!-- bar -->
                    <span class="inline-block h-10 relative"
                          :class="{
                          'bg-white' : activeSection == i + 1,
                          'bg-gray-400' : activeSection != i + 1,
                          }"
                          :style="hovered? 'width: 6px; left: -1px; background-color: #1ECECB;' : 'width: 4px;'"
                    ></span>
                    <!--                    <span class="inline-block h-10 relative"-->
                    <!--                          :class="{-->
                    <!--                          'bg-white' : activeSection == 1 && activeSection == i + 1,-->
                    <!--                          'bg-gray-400' : activeSection == 1 && activeSection != i + 1,-->

                    <!--                          'bg-gray-700' : activeSection != 1 && activeSection == i + 1,-->
                    <!--                          'bg-gray-500' : activeSection != 1 && activeSection != i + 1,-->

                    <!--                          }"-->
                    <!--                          :style="hovered? 'width: 6px; left: -1px; background-color: #1ECECB;' : 'width: 4px;'"-->
                    <!--                    ></span>-->
                    <!-- title -->
                    <span class="inline-block pl-3 text-sm"
                          :class="{
                                'text-white font-bold': activeSection == i + 1,
                                'text-gray-400': activeSection != i + 1,
                                'font-bold': hovered
                                }"
                          :style="hovered ? 'color: #1ECECB;' : ''"
                          x-text="slide.title ? slide.title : '섹션 ' + (i+1) + '' "></span>
                    <!--                    <span class="inline-block pl-3 text-sm"-->
                    <!--                          :class="{-->
                    <!--                                'text-white font-bold': activeSection == 1 && activeSection == i + 1,-->
                    <!--                                'text-gray-400': activeSection == 1 && activeSection != i + 1,-->

                    <!--                                'text-gray-700 font-bold': activeSection != 1 && activeSection == i + 1,-->
                    <!--                                'text-gray-500': activeSection != 1 && activeSection != i + 1,-->

                    <!--                                'font-bold': hovered-->
                    <!--                                }"-->
                    <!--                          :style="hovered ? 'color: #1ECECB;' : ''"-->
                    <!--                          x-text="slide.title ? slide.title : '섹션 ' + (i+1) + '' "></span>-->
                </a>
            </li>
        </template>
    </ul>

    <!-- 마우스 스크롤 -->
    <span class="scroll-down block -ml-1 mt-10 h-8.5"
          :class="{'white' : activeSection == 1}"
    ></span>
</div>

<!-- 슬라이드 섹션 -->
<!-- 4. after로 최상위 태그에 이미지의 필름을 세운다. -->
<style>
    .sections {
        > div > a {
            /* 필름은 a태그의 after로 줘서, 내용물보다 제일 아래 깔리게 두고 -> 내부 text만 z-index를 추가로 준다.. */

            &::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.3);
            }
        }
    }
</style>
<main class="sections">
    <template x-for="(slide, i) in slides" :key="i">
        <div x-intersect.half="activeSection = i + 1;"
             :id="`section-${i}`"
             class="h-screen relative"
        >
            <!--:style="`
               background: url(${slide.image});
               background-size: cover;
               background-repeat: no-repeat;
               background-position: center;
           `"-->
            <!-- 1. 클릭을 대비해 a를 씌우는데, 내부 img가 block이 될거라서, a요소가 감쌀라면 block-->
            <!-- 추후, swiper-wrapper/slide(h100) 내부에 들어갈 것이기 때문에 h-100도 추가한다.
                 여기서는 해당img 높이가 정해져잇지 않을 것이기 때문에 + w100% 추가
                 참고) 상위 부모에 높이가 정해져있다면, swiper최상위 부모인 .swiper에 h100%을 줘서 맞춰내려가야한다.
                 -->
            <a href="#" class="block h-full w-full">
                <!-- 2. 내부 img도 block + w100%를 걸어준다. img의 높이는 해당 것을 사용해야하나,
                        h100% + object-cover 추가-->
                <img :src="slide.image" alt="" class="block w-full h-full object-cover">
                <!-- 3. 텍스트 작업을 위해, div를 추가한다. 2개box를 위해 p태그를 2개 쓴다.
                    띄우기 위해 div box를 absolute로 주고 띄운다. 최상위 div에 relative를 추가로 준다.
                -->
                <div class="absolute z-10"
                     style="left:150px; bottom:220px;"
                     x-show="slide.title"
                >
                    <p class="text-white text-5xl font-bold" x-text="slide.title"></p>
                    <p class="text-white mt-3.5 text-3xl" x-text="slide.subtitle"></p>
                </div>
            </a>
            <!--<span :class="{ 'text-white': activeSection == 1 }" x-text="slide.title"></span>-->
        </div>
    </template>
</main>

</body>
</html>